<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.x.x plugin-docs plugin-id-default docs-doc-id-package/core-tokenizer">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yozora RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yozora Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Yozora JSON Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Yozora" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">@yozora/core-tokenizer | Yozora</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yozora.guanghechen.com/docs/package/core-tokenizer"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.x.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.x.x"><meta data-rh="true" name="docsearch:version" content="2.x.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.x.x"><meta data-rh="true" property="og:title" content="@yozora/core-tokenizer | Yozora"><meta data-rh="true" name="description" content="&lt;img"><meta data-rh="true" property="og:description" content="&lt;img"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yozora.guanghechen.com/docs/package/core-tokenizer"><link data-rh="true" rel="alternate" href="https://yozora.guanghechen.com/docs/package/core-tokenizer" hreflang="en"><link data-rh="true" rel="alternate" href="https://yozora.guanghechen.com/docs/package/core-tokenizer" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MJITY2F9VS-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9861e282.css">
<link rel="preload" href="/assets/js/runtime~main.d34bba7c.js" as="script">
<link rel="preload" href="/assets/js/main.6a58d552.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">‚≠êÔ∏è If you like Yozora, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/yozorajs/yozora">GitHub</a>! Ô∏è</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Yozora Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Yozora Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Yozora</b></a><a class="navbar__item navbar__link" href="/docs">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/package/ast">API</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs">2.x.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/package/core-tokenizer">3.x.x üöß</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/package/core-tokenizer">2.x.x</a></li><li><a class="dropdown__link" href="/docs/1.x.x/package/core-tokenizer">1.x.x</a></li></ul></div><a href="https://github.com/yozorajs/yozora" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link yozora-header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/logo.png" alt="Yozora Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Yozora Logo" class="themedImage_W2Cr themedImage--dark_oUvU"><b>Yozora</b></a><nav class="menu thin-scrollbar menu_izAj menuWithAnnouncementBar_l2a_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/package/ast">ast</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/package/ast-util">ast-util</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/package/core-tokenizer">core-tokenizer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/package/core-parser">core-parser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/example/gfm">GFM Examples</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/package/jest-for-tokenizer">Scaffold</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">core-tokenizer</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.x.x</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>@yozora/core-tokenizer</h1></header><header><div align="center"><a href="https://www.npmjs.com/package/@yozora/core-tokenizer" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Npm Version" src="https://img.shields.io/npm/v/@yozora/core-tokenizer/latest" class="img_E7b_"></a><a href="https://www.npmjs.com/package/@yozora/core-tokenizer" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Npm Download" src="https://img.shields.io/npm/dm/@yozora/core-tokenizer.svg" class="img_E7b_"></a><a href="https://www.npmjs.com/package/@yozora/core-tokenizer" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Npm License" src="https://img.shields.io/npm/l/@yozora/core-tokenizer.svg" class="img_E7b_"></a><a href="#install"><img loading="lazy" alt="Module formats: cjs, esm" src="https://img.shields.io/badge/module_formats-cjs%2C%20esm-green.svg" class="img_E7b_"></a><a href="https://github.com/nodejs/node" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Node.js Version" src="https://img.shields.io/node/v/@yozora/core-tokenizer" class="img_E7b_"></a><a href="https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Code Style: prettier" src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" class="img_E7b_"></a></div></header><br><p>Defines the shape of Yozora Tokenizer and life cycle methods, as well as some
utility functions to assist in resolving tokens.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="install">Install<a class="hash-link" href="#install" title="Direct link to heading">‚Äã</a></h2><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">npm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Yarn</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --save @yozora/core-tokenizer</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> @yozora/core-tokenizer</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="usage">Usage<a class="hash-link" href="#usage" title="Direct link to heading">‚Äã</a></h2><p>According to the Parse Strategy, there are two types of tokenizers: Block
Tokenizer and Inline tokenizer.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="block-tokenizer">Block Tokenizer<a class="hash-link" href="#block-tokenizer" title="Direct link to heading">‚Äã</a></h3><p>The parsing steps of the block tokenizer are divided into three life cycles:</p><ul><li><p><code>match-block</code>: processing literal text and produce <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/token.ts#L41" target="_blank" rel="noopener noreferrer">BlockToken</a>s.</p></li><li><p><code>parse-block</code>: processing <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/token.ts#L41" target="_blank" rel="noopener noreferrer">BlockToken</a>s into <a href="/docs/package/ast#node">AST Node</a>s</p></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="match-block-phase">match-block phase<a class="hash-link" href="#match-block-phase" title="Direct link to heading">‚Äã</a></h4><p>In the process of parsing block nodes, the content is read line by line. The
block-level node has a nested structure:</p><div class="codeBlockContainer_I0IT language-markdown theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-markdown codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token blockquote punctuation" style="color:#393A34">&gt;</span><span class="token plain"> This is a blockquote</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain"></span><span class="token blockquote punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> This is a list item in blockquote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token blockquote punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> # This is a setext heading in the list item of the blockquote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token blockquote punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> &gt; ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>As shown in the second line of the above code, when parsing
<a href="/docs/package/tokenizer-list">ListItem</a>, it cannot get the first character in
the original document line, but wait for its ancestor elements along the
existing nesting structure (such as the above <a href="/docs/package/tokenizer-blockquote">Blockquote</a>)
to complete the matching, and then gets a matching opportunity. In order to make
the tokenizers work with each other transparently, when designing the life cycle
methods of the block-level tokenizer in the <code>match-block</code> stage, the parsing
logic of the nested structure lifted into <!-- -->[@yozora/core-parser ][]<!-- -->, and use a
special data structure called <code>PhrasingContentLine</code> as the actual parsing unit
of a line:</p><div class="codeBlockContainer_I0IT language-typescript theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-typescript codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PhrasingContentLine</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Start index of interval in nodePoints.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  startIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * End index of interval in nodePoints.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Array of NodePoint which contains all the contents of this line.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodePoints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReadonlyArray</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">INodePoint</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * The index of first non-blank character in the rest of the current line</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  firstNonWhitespaceIndex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * The precede space count, one tab equals four space.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * @see https://github.github.com/gfm/#tabs</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  countOfPrecedeSpaces</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The life cycle methods at this stage is subdivided into the following methods
(see <!-- -->[match-block][lifecycle-match-block]<!-- --> for the type definition details):</p><ul><li><p><code>isContainingBlock</code>: (Required) Indicate that whether if it is a container block.</p></li><li><p><code>eatOpener</code>: (Required) Try to match a new block node.</p></li><li><p><code>eatAndInterruptPreviousSibling</code>: (optional) try to interrupt the previous
sibling node and match a new block node.</p></li><li><p><code>eatContinuationText</code>: (Optional) Try to match the continuation text of current
block node, that is, consume the current <code>PhrasingContentLine</code> with the current
block node. There may be many kinds of results at this stage, which are
distinguished according to the value of <code>status</code> in the returned result:</p><ul><li><p><code>notMatched</code>: Not matched.</p></li><li><p><code>closing</code>: Matched and this is the last line of the current block node.
That is, the current block node is in a saturated state and is closing.</p></li><li><p><code>opening</code>: Matched, and not closing yet.</p></li><li><p><code>failedAndRollback</code>: The match fails, and the content of the previous lines
are to be rolled back. For convenience, it is assumed that the rollback
operation does not affect the previously satisfied nested structure.</p></li><li><p><code>closingAndRollback</code>: Matching failed, but only the last line needs to be
rollback, the current node is still a valid one and will be closed soon.</p></li></ul></li><li><p><code>eatLazyContinuationText</code>: (Optional) Try to match Laziness Continuation Text.
Actually only the <a href="/docs/package/tokenizer-paragraph">@yozora/tokenizer-paragraph</a> needs to implement this
method, see <a href="https://github.github.com/gfm/#phase-1-block-structure" target="_blank" rel="noopener noreferrer">https://github.github.com/gfm/#phase-1-block-structure</a> step3
for details.</p></li><li><p><code>onClose</code>: (Optional) Called when the current node is closed, used to perform some cleanup operations.</p></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="parse-block-phase">parse-block phase<a class="hash-link" href="#parse-block-phase" title="Direct link to heading">‚Äã</a></h4><p>The life cycle methods at this stage is subdivided into the following methods
(see <!-- -->[parse-block][lifecycle-parse-block]<!-- --> for the complete type definition):</p><ul><li><code>parse</code>: Processing a specified type token list to <a href="/docs/package/ast#node">AST Node</a> list.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="additional-in-blocktokenizer">Additional in <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/tokenizer.ts#L39" target="_blank" rel="noopener noreferrer">BlockTokenizer</a><a class="hash-link" href="#additional-in-blocktokenizer" title="Direct link to heading">‚Äã</a></h4><ul><li><p><code>extractPhrasingContentLines</code>: (Optional) Convert a Block Token generated by
the current tokenizer to <code>PhrasingContentLines[]</code>. This method is only needed
when the matching node of this type may be rolled back.</p></li><li><p><code>buildBlockToken</code>: (Optional) Convert <code>PhrasingContentLines[]</code> into a Block Token.
This method is only needed when the matching node of this type may be rolled back</p></li></ul><hr><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="inline-tokenizer">Inline Tokenizer<a class="hash-link" href="#inline-tokenizer" title="Direct link to heading">‚Äã</a></h3><p>The parsing step of the inline parser is divided into two life cycles</p><ul><li><code>match-inline</code>: processing literal text and produce <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/token.ts#L55" target="_blank" rel="noopener noreferrer">InlineToken</a>s.</li><li><code>parse-inline</code>: processing <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/token.ts#L55" target="_blank" rel="noopener noreferrer">InlineToken</a>s into <a href="/docs/package/ast#node">AST Node</a>s.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="match-inline-phase">match-inline phase<a class="hash-link" href="#match-inline-phase" title="Direct link to heading">‚Äã</a></h4><p>After a block node is closed, we can start matching inline nodes, so when we
match inline nodes, we get a continuous text without the concept of &quot;line&quot;.
But inline nodes have priority. For example, link has a higher priority than
emphasis (see <a href="https://github.github.com/gfm/#example-529" target="_blank" rel="noopener noreferrer">https://github.github.com/gfm/#example-529</a>). In order to enable
unperceptual coordination between tokenizers, when designing the life cycle
function of the inline tokenizer in the <code>match-inline</code> phase, put priority-related
logic in <a href="/docs/package/core-parser">@yozora/core-parser</a> In processing, each tokenizer only provides
four types of separators: <code>opener</code>, <code>both</code>, <code>closer</code>, <code>full</code>. Then the
processor in <a href="/docs/package/core-parser">@yozora/core-parser</a> completes the coordination work.</p><p>The lifecycle methods at this stage is subdivided into the following methods
(see <!-- -->[match-inline][lifecycle-match-inline]<!-- --> for the complete type definition):</p><ul><li><code>findDelimiter</code>: (Required) Find a delimiter</li><li><code>isDelimiterPair</code>: (Optional) Check whether the given two delimiters can match</li><li><code>processDelimiterPair</code>: (Optional) Process the matched two delimiters. Such as <a href="/docs/package/tokenizer-emphasis">@yozora/tokenizer-emphasis</a> </li><li><code>processSingleDelimiter</code>:  (Optional) Process a single delimiter. Such as <a href="/docs/package/tokenizer-text">@yozora/tokenizer-text</a> </li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="parser-inline-phase">parser-inline phase<a class="hash-link" href="#parser-inline-phase" title="Direct link to heading">‚Äã</a></h4><p>The lifecycle methods at this stage is subdivided into the following methods
(see <!-- -->[parse-inline][lifecycle-pase-inline]<!-- --> for the complete type definition):</p><ul><li><code>parse</code>: Processing a specified type token list to <a href="/docs/package/ast#node">AST Node</a> list.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="related">Related<a class="hash-link" href="#related" title="Direct link to heading">‚Äã</a></h2><ul><li><p><a href="https://github.com/yozorajs/yozora/tree/main/packages/core-tokenizer" target="_blank" rel="noopener noreferrer">Sourcecode</a></p></li><li><p><a href="https://github.com/yozorajs/yozora/tree/main/packages/template-tokenizer#readme" target="_blank" rel="noopener noreferrer">@yozora/template-tokenizer</a> For creating a Yozora Tokenizer.</p></li><li><p>Block Tokenizer Lifecycle</p><ul><li>match-block: <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/match-block/api.ts#L7" target="_blank" rel="noopener noreferrer">IMatchBlockPhaseApi</a>, <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/match-block/hook.ts#L16" target="_blank" rel="noopener noreferrer">IMatchBlockHook</a></li><li>parse-block: <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/parse-block/api.ts#L8" target="_blank" rel="noopener noreferrer">IParseBlockPhaseApi</a>, <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/parse-block/hook.ts#L16" target="_blank" rel="noopener noreferrer">IParseBlockHook</a></li></ul></li><li><p>Inline Tokenizer Lifecycle</p><ul><li>match-inline: <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/match-inline/api.ts#L7" target="_blank" rel="noopener noreferrer">IMatchInlinePhaseApi</a>, <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/match-inline/hook.ts#L16" target="_blank" rel="noopener noreferrer">IMatchInlineHook</a></li><li>parse-inline: <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/parse-inline/api.ts#L8" target="_blank" rel="noopener noreferrer">IParseInlinePhaseApi</a>, <a href="https://github.com/yozorajs/yozora/blob/fbbaf365ad9a16130cc14d40da845908e0099549/packages/core-tokenizer/src/types/parse-inline/hook.ts#L16" target="_blank" rel="noopener noreferrer">IParseInlineHook</a></li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-04-15T16:13:18.000Z">4/15/2022</time></b> by <b>guanghechen</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/package/ast-util"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ast-util</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/package/core-parser"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">core-parser</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install" class="table-of-contents__link toc-highlight">Install</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#block-tokenizer" class="table-of-contents__link toc-highlight">Block Tokenizer</a></li><li><a href="#inline-tokenizer" class="table-of-contents__link toc-highlight">Inline Tokenizer</a></li></ul></li><li><a href="#related" class="table-of-contents__link toc-highlight">Related</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 <a target="_blank" rel="noopener" rel="noreferrer" href="https://github.com/guanghechen">guanghechen</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d34bba7c.js"></script>
<script src="/assets/js/main.6a58d552.js"></script>
</body>
</html>